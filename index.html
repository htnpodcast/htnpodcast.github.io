<!DOCTYPE HTML>
<html>

<head>
	<title>DAO.FM</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<link rel="stylesheet" href="assets/css/player.css" />
	<link rel="shortcut icon" href="images/favicon.ico">
	<noscript>
		<link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>

<body class="is-preload">

	<!-- Wrapper -->
	<div id="wrapper">

		<!-- Header -->
		<header id="header">
			<div class="content">
				<div>
					<div class="container">
						<div class="music"></div>
					</div>
				</div>
			</div>
			<nav>
				<ul>
					<li><a onclick="delPlaySpeed()">减速</a></li>
					<li><a id="speed" onclick="reSetPlaySpeed()">尚未开始播放</a></li>
					<li><a onclick="addPlaySpeed()">加速</a></li>
				</ul>
			</nav>
			<a href="" id="down">Download</a>
		</header>

		<!-- Footer -->
		<footer id="footer">
			<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
			<p class="copyright">Powered by: <a href="https://github.com/orgs/htnpodcast/dashboard">htnpodcast</a>.</p>
		</footer>

	</div>

	<!-- BG -->
	<div id="bg"></div>

	<!-- Scriptsw -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/browser.min.js"></script>
	<script src="assets/js/breakpoints.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>
	<script src="assets/js/meplayer.min.js"></script>
	<script>
		$('#down').attr("href", "https://cast.jjldbk.com/series/" + window.location.hash.replace('#', ''));
		mePlayer({
			music: {
				src: "https://cast.jjldbk.com/series/" + window.location.hash.replace('#', ''),
				title: 'DAO.FM',
				author: '津津乐道播客',
				loop: true,
				cover: 'images/dao.png'
			},
			target: '.music',
			autoplay: false
		})
		var status = 0;
		$('.meplayer-control-play').click(function () {
			if (status == 0) {
				getPlaySpeed()
				if (window.localStorage.getItem(window.location.hash.replace('#', '')) != null) {
					$('audio')[0].currentTime = window.localStorage.getItem(window.location.hash.replace('#', ''));
					const timeId = setInterval(() => {
						if (true) {
							clearInterval(this.timeId)
						}; window.localStorage.setItem(window.location.hash.replace('#', ''), $('audio')[0].currentTime);
					}, 3000)
				} else {
					const timeId = setInterval(() => {
						if (true) {
							clearInterval(this.timeId)
						}; window.localStorage.setItem(window.location.hash.replace('#', ''), $('audio')[0].currentTime);
					}, 3000)
				}
				status = 1;
			}
		})

		$('.meplayer-isplaying')[0].removeClass("meplayer-isplaying");

		window.setTimeout(mePlayer.play, 1500)
		function getPlaySpeed() {
			$('#speed')[0].innerHTML = "Speed: " + $('audio')[0].playbackRate;
		}
		function addPlaySpeed() {
			$('audio')[0].playbackRate = $('audio')[0].playbackRate + 0.25;
			getPlaySpeed();
		}
		function delPlaySpeed() {
			$('audio')[0].playbackRate = $('audio')[0].playbackRate - 0.25;
			getPlaySpeed();
		}
		function reSetPlaySpeed() {
			$('audio')[0].playbackRate = 1;
			getPlaySpeed();
		}

	</script>

</body>

</html>