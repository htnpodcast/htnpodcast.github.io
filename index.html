<!DOCTYPE HTML>
<html>

<head>
    <title>DAO.FM</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/APlayer.min.css">
    <link rel="shortcut icon" href="images/favicon.ico">
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <div class="content">
                <div>
                    <div class="container">
                        <div id="player"></div>
                    </div>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a onclick="delPlaySpeed()">减速</a></li>
                    <li><a id="speed" onclick="reSetPlaySpeed()">尚未开始播放</a></li>
                    <li><a onclick="addPlaySpeed()">加速</a></li>
                </ul>
            </nav>
            <a onclick="window.location.href='https://cast.jjldbk.com/series/' + window.location.hash.replace('#', '')">Download(视频点这里)</a>
        </header>

        <!-- Footer -->
        <footer id="footer">
            <p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
            <p class="copyright">Powered by: <a href="https://dao.fm">htnpodcast</a>.</p>
        </footer>

    </div>

    <!-- BG -->
    <div id="bg"></div>

    <!-- Scriptsw -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/APlayer.min.js"></script>
    <script>
        const ap = new APlayer({
            container: document.getElementById('player'),
            mini: false,
            autoplay: false,
            theme: '#FADFA3',
            loop: 'all',
            order: 'random',
            preload: 'auto',
            volume: 0.7,
            mutex: true,
            listFolded: false,
            listMaxHeight: 90,
            lrcType: 3,
            audio: [
                {
                    name: '津津乐道播客',
                    artist: 'DAO.FM',
                    url: "https://cast.jjldbk.com/series/" + window.location.hash.replace('#', ''),
                    cover: 'images/dao.png',
                    theme: '#f00'
                }
            ]
        });
        ap.lrc.hide();
		reSetPlaySpeed()
        if (window.localStorage.getItem(window.location.hash.replace('#', '')) != null) {
            ap.audio.currentTime = window.localStorage.getItem(window.location.hash.replace('#', ''));
            const timeId = setInterval(() => {
                if (true) {
                    clearInterval(this.timeId)
                }; window.localStorage.setItem(window.location.hash.replace('#', ''), ap.audio.currentTime);
            }, 5000)
        } else {
            const timeId = setInterval(() => {
                if (true) {
                    clearInterval(this.timeId)
                }; window.localStorage.setItem(window.location.hash.replace('#', ''), ap.audio.currentTime);
            }, 5000)
        }

        function getPlaySpeed() {
            $('#speed')[0].innerHTML = "Speed: " + ap.audio.playbackRate;
        }
        function addPlaySpeed() {
            ap.audio.playbackRate = ap.audio.playbackRate + 0.25
            getPlaySpeed();
        }
        function delPlaySpeed() {
            ap.audio.playbackRate = ap.audio.playbackRate - 0.25
            getPlaySpeed();
        }
        function reSetPlaySpeed() {
            ap.audio.playbackRate = 1;
            getPlaySpeed();
        }
    </script>

</body>

</html>
